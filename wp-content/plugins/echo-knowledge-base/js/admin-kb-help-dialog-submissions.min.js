jQuery(document).ready(function(e){function i(i,a,o,s,d,m){let _,l;a=void 0===a?"epkb_callback_noop":a,e.ajax({type:"POST",dataType:"json",data:i,url:ajaxurl,beforeSend:function(e){void 0!==m&&!1!==m||t("show",""),"object"==typeof m&&t("show","",m)}}).done(function(e){((l=e||"").error||void 0===l.message)&&(_=l.message?l.message:n("",epkb_vars.reload_try_again,"error"))}).fail(function(e,i,t){_=t?" ["+t+"]":epkb_vars.unknown_error,_=n(epkb_vars.error_occurred+". "+epkb_vars.msg_try_again,_,"error")}).always(function(){if(l=void 0===l?"":l,"function"==typeof d&&d(l),t("remove",""),_)return e(".eckb-bottom-notice-message").remove(),e("body").append(_).removeClass("fadeOutDown"),void setTimeout(function(){e(".eckb-bottom-notice-message").addClass("fadeOutDown")},1e4);"function"==typeof a?"undefined"===o?a(l):a(l,o):s&&location.reload()})}function t(i,t,n){if("show"===i){let i=void 0===n?"":"epkb-admin-dialog-box-loading--relative",a='<div class="epkb-admin-dialog-box-loading '+i+'"><div class="epkb-admin-dbl__header"><div class="epkb-admin-dbl-icon epkbfa epkbfa-hourglass-half"></div>'+(t?'<div class="epkb-admin-text">'+t+"</div>":"")+'</div></div><div class="epkb-admin-dialog-box-overlay '+i+'"></div>';void 0===n?e("body").append(a):n.append(a)}else"remove"===i&&(e(".epkb-admin-dialog-box-loading").remove(),e(".epkb-admin-dialog-box-overlay").remove())}function n(e,i,t){return'<div class="eckb-bottom-notice-message"><div class="contents"><span class="'+t+'">'+(e?"<h4>"+e+"</h4>":"")+(i?"<p>"+i+"</p>":"")+'</span></div><div class="epkb-close-notice epkbfa epkbfa-window-close"></div></div>'}function a(i,t=""){e(".eckb-bottom-notice-message").remove(),e("body").append(n(t,i,"success")),setTimeout(function(){e(".eckb-bottom-notice-message").addClass("fadeOutDown")},1e4)}e("#epkb-admin__boxes-list__submissions").on("click",".epkb-admin__items-list__delete-all input",function(i){e("#epkb-admin__items-list__delete-all_confirmation").addClass("epkb-dialog-box-form--active")}),e("#epkb-admin__items-list__delete-all_confirmation form").on("submit",function(t){t.preventDefault();let n={action:e(this).find('[name="action"]').val(),_wpnonce_epkb_ajax_action:epkb_help_dialog_vars.nonce};return e("#epkb-admin__items-list__delete-all_confirmation").removeClass("epkb-dialog-box-form--active"),i(n,function(i){if(!i.error&&void 0!==i.message){let t=e("#epkb-admin__items-list__delete-all_confirmation").parent().parent();a(i.message),t.find(".epkb-admin__items-list .epkb-admin__items-list__item").remove(),t.find(".epkb-admin__items-list__more-items-message").remove(),t.find(".epkb-admin__items-list__totally-found").html("0"),t.find(".epkb-admin__items-list__delete-all").hide()}}),!1});let o=function(t){t.preventDefault();let o=e(this).closest(".epkb-admin__items-list__item"),s=o.find('[name="item_id"]').val();if(void 0===s||!s)return void function(i,t=""){e(".eckb-bottom-notice-message").remove(),e("body").append(n(t,i,"error")),setTimeout(function(){e(".eckb-bottom-notice-message").addClass("fadeOutDown")},1e4)}(epkb_vars.reload_try_again);return i({action:o.find('[name="action"]').val(),item_id:s,_wpnonce_epkb_ajax_action:epkb_help_dialog_vars.nonce},function(e){if(!e.error&&void 0!==e.message){a(e.message);let i=o.closest(".epkb-admin__items-list").parent().parent().parent();parseInt(i.find('[name="page_number"]').val());i.find(".epkb-admin__items-list__totally-found").html(e.total_number),o.fadeOut(500,function(){o.remove(),0===parseInt(e.total_number)&&i.find(".epkb-admin__items-list__delete-all").hide()})}}),!1};e(".epkb-admin__items-list form.epkb-admin__items-list__field-actions__form").on("submit",o),e(".epkb-admin__items-list__more-items-message form").on("submit",function(t){t.preventDefault();let n=e(this).closest(".epkb-admin__items-list__more-items-message").parent(),a=e(this),s=n.find(".epkb-admin__items-list .epkb-admin__items-list__no-results"),d=parseInt(a.find('[name="page_number"]').val());return i({action:a.find('[name="action"]').val(),page_number:d+1,_wpnonce_epkb_ajax_action:epkb_help_dialog_vars.nonce},function(i){if(!i.error&&void 0!==i.message){let t=e(i.items);t.css("display","none"),d+=1,t.find("form.epkb-admin__items-list__field-actions__form").on("submit",o),i.total_number<=i.per_page*d&&n.find(".epkb-admin__items-list__more-items-message").remove(),e(s).before(t),t.fadeIn(1e3),a.find('[name="page_number"]').val(d)}}),!1}),e("body").on("click",".epkb-close-notice",function(){let i=e(this).closest(".eckb-bottom-notice-message");i.addClass("fadeOutDown"),setTimeout(function(){i.html("")},1e3)})});