jQuery(document).ready(function(e){function a(a,n,o,c,s,_){let d,l;n=void 0===n?"epkb_callback_noop":n,e.ajax({type:"POST",dataType:"json",data:a,url:ajaxurl,beforeSend:function(e){void 0!==_&&!1!==_||t("show",""),"object"==typeof _&&t("show","")}}).done(function(e){((l=e||"").error||void 0===l.message)&&(d=l.message?l.message:i("",epkb_vars.reload_try_again,"error"))}).fail(function(e,a,t){d=t?" ["+t+"]":epkb_vars.unknown_error,d=i(epkb_vars.error_occurred+". "+epkb_vars.msg_try_again,d,"error")}).always(function(){if(l=void 0===l?"":l,"function"==typeof s&&s(l),t("remove",""),d)return e(".eckb-bottom-notice-message").remove(),e("body").append(d).removeClass("fadeOutDown"),void setTimeout(function(){e(".eckb-bottom-notice-message").addClass("fadeOutDown")},1e4);"function"==typeof n?void 0===o?n(l):n(l,o):c&&location.reload()})}function t(a,t){if("show"===a){let a='<div class="epkb-admin-dialog-box-loading"><div class="epkb-admin-dbl__header"><div class="epkb-admin-dbl-icon epkbfa epkbfa-hourglass-half"></div>'+(t?'<div class="epkb-admin-text">'+t+"</div>":"")+'</div></div><div class="epkb-admin-dialog-box-overlay"></div>';e("body").append(a)}else"remove"===a&&(e(".epkb-admin-dialog-box-loading").remove(),e(".epkb-admin-dialog-box-overlay").remove())}function i(e,a,t){return'<div class="eckb-bottom-notice-message"><div class="contents"><span class="'+t+'">'+(e?"<h4>"+e+"</h4>":"")+(a?"<p>"+a+"</p>":"")+'</span></div><div class="epkb-close-notice epkbfa epkbfa-window-close"></div></div>'}function n(){var a=e("body").find(".eckb-bottom-notice-message");a.length&&(a.addClass("fadeOutDown"),setTimeout(function(){a.html("")},1e3))}function o(){e(".eckb-bottom-notice-message").length>0&&(clearTimeout(s),s=setTimeout(function(){n()},1e4))}var c=e("#ekb-admin-page-wrap");e(c).find(".epkb-admin__content").length>0&&e("#wpwrap").addClass("epkb-admin__wpwrap");let s=!1;e("#epkb-list-of-kbs").on("change",function(a){let t=e(this).find("option:selected");if("core"!==t.attr("data-plugin"))return;if("closed"===t.val())return void(window.location=t.attr("data-target"));let i=window.location.href;if("archived"===e(this).val()){let e=window.location.href.split("#");return void(window.location=e[0]+"&archived-kbs=on")}i=i.replaceAll("&archived-kbs=on","").replaceAll("&epkb_after_kb_setup","");let n=t.attr("data-link");if(void 0!==n&&n.length>0)return window.open(n,"_blank"),void e(this).val(e(this).attr("data-active-kb-id")).trigger("change");let o=e(this).attr("data-active-kb-id"),c=e(this).val();c&&(e(this).attr("data-active-kb-id",c),window.location.href=i.replaceAll("epkb_post_type_"+o,"epkb_post_type_"+c))}),e(".epkb-admin__kb-rename .epkb-edit-toggle").on("click",function(){e(this).parent().parent().find(".epkb-admin__kb-rename__edit").slideToggle()}),e("#epkb_save_access_control").on("click",function(){a({action:"epkb_save_access_control",_wpnonce_epkb_ajax_action:epkb_vars.nonce,epkb_kb_id:e("#epkb-list-of-kbs").val(),admin_eckb_access_need_help_read:e('#admin_eckb_access_need_help_read input[type="radio"]:checked').val(),admin_eckb_access_search_analytics_read:e('#admin_eckb_access_search_analytics_read input[type="radio"]:checked').val(),admin_eckb_access_addons_news_read:e('#admin_eckb_access_addons_news_read input[type="radio"]:checked').val(),admin_eckb_access_order_articles_write:e('#admin_eckb_access_order_articles_write input[type="radio"]:checked').val(),admin_eckb_access_frontend_editor_write:e('#admin_eckb_access_frontend_editor_write input[type="radio"]:checked').val()},function(a){e(".eckb-top-notice-message").remove(),void 0!==a.message&&(n(),e("body").append(a.message)),o()})}),e("#epkb-admin__kb-rename__form").on("submit",function(t){t.preventDefault();let i=e(this),c=i.find('input[name="epkb_kb_name_input"]').val(),s=i.find('input[name="epkb_kb_id"]').val();a({action:"epkb_update_kb_name",_wpnonce_epkb_ajax_action:epkb_vars.nonce,epkb_kb_id:s,epkb_kb_name_input:c},function(a){e(".eckb-top-notice-message").remove(),void 0!==a.message&&(n(),e("body").append(a.message)),o(),e("#epkb-admin__kb-rename__value").html(c),e('#epkb-list-of-kbs option[value="'+s+'"]').html(c)})}),e(".epkb-admin__top-panel__item").on("click",function(){if(e(this).hasClass("epkb-article-structure-dialog"))return;if(e(this).hasClass("epkb-admin__top-panel__item--active")){let a=e("epkb-admin__secondary-panel--active").find(".epkb-admin__secondary-panel__item--active").length?e("epkb-admin__secondary-panel--active").find(".epkb-admin__secondary-panel__item--active"):e(e("epkb-admin__secondary-panel--active").find(".epkb-admin__secondary-panel__item")[0]);return void setTimeout(function(){a.trigger("click")},100)}let a=e(this).attr("data-target");e(".epkb-admin__top-panel__item").removeClass("epkb-admin__top-panel__item--active"),e(this).addClass("epkb-admin__top-panel__item--active"),e(".epkb-admin__boxes-list").removeClass("epkb-admin__boxes-list--active"),e("#epkb-admin__boxes-list__"+a).addClass("epkb-admin__boxes-list--active"),e(".epkb-admin__secondary-panel").removeClass("epkb-admin__secondary-panel--active");let t=e("#epkb-admin__secondary-panel__"+a).addClass("epkb-admin__secondary-panel--active"),i=t.find(".epkb-admin__secondary-panel__item--active").length?t.find(".epkb-admin__secondary-panel__item--active"):e(t.find(".epkb-admin__secondary-panel__item")[0]);setTimeout(function(){i.trigger("click")},100);let n=this;setTimeout(function(){"eckb_license_tab"===e(n).attr("id")&&e("#eckb_license_tab").trigger("click")},100),"features"!==a||e(this).hasClass("epkb-admin__flag--visited")||e.ajax({type:"POST",dataType:"json",data:{action:"epkb_features_tab_visited",_wpnonce_epkb_ajax_action:epkb_vars.nonce},url:ajaxurl}).done(function(){e("#epkb-admin__step-cta-box__features .epkb-admin__step-cta-box__header").after('<span class="epkb-admin__step-cta-box__content__icon epkbfa epkbfa-check-circle"></span>')}),window.location.hash="#"+a}),function(){let a=window.location.href.split("#");if(1===a.length)return void e(e(".epkb-admin__top-panel__item")[0]).trigger("click");let t=a[1].split("__"),i=e('.epkb-admin__top-panel__item[data-target="'+t[0]+'"]');if(0===i.length)return void e(e(".epkb-admin__top-panel__item")[0]).trigger("click");e(i[0]).trigger("click");let n='.epkb-admin__secondary-panel__item[data-target="'+a[1]+'"]',o=t.length>1&&t[1].length&&e(n).length?e(n):e(".epkb-admin__secondary-panel--active").find(".epkb-admin__secondary-panel__item")[0];setTimeout(function(){e(o).trigger("click")},100)}(),e(".epkb-admin__secondary-panel__item").on("click",function(){if(e(this).hasClass("epkb-article-structure-dialog"))return;if(e(this).hasClass("epkb-admin__secondary-panel__item--active"))return void(window.location.hash="#"+e(this).attr("data-target"));let a=e(this).attr("data-target"),t=a.split("__")[0];e("#epkb-admin__secondary-panel__"+t).find(".epkb-admin__secondary-panel__item").removeClass("epkb-admin__secondary-panel__item--active"),e(this).addClass("epkb-admin__secondary-panel__item--active"),e("#epkb-admin__boxes-list__"+t).find(".epkb-admin__secondary-boxes-list").removeClass("epkb-admin__secondary-boxes-list--active"),e("#epkb-admin__secondary-boxes-list__"+a).addClass("epkb-admin__secondary-boxes-list--active"),window.location.hash="#"+a}),function(){function a(a,t){c.find(a+" > .nav_tab").on("click",function(){c.find(a+" > .nav_tab").removeClass("active"),e(this).addClass("active"),c.find(t+" > .ekb-admin-page-tab-panel").removeClass("active");var i=e(this).index()+1;c.find(t+" > .ekb-admin-page-tab-panel:nth-child( "+i+" ) ").addClass("active")})}a(".add_on_container .epkb-main-nav > .epkb-admin-pages-nav-tabs","#add_on_panels"),a(".epkb-main-nav > .epkb-admin-pages-nav-tabs","#main_panels"),a("#help_tabs_nav","#help_tab_panel"),a("#new_features_tabs_nav","#new_features_tab_panel")}(),e(".epkb-header__tab").on("click",function(a){let t=e(this).attr("id");e(".epkb-header__tab").removeClass("epkb-header__tab--active"),e(".epkb-content__tab").removeClass("epkb-content__tab--active"),e(this).addClass("epkb-header__tab--active"),e("#"+t+"_content").addClass("epkb-content__tab--active")}),c.find("#epkb_toggle_debug").on("click",function(){e(".eckb-top-notice-message").html("");a({action:"epkb_toggle_debug",_wpnonce_epkb_toggle_debug:e("#_wpnonce_epkb_toggle_debug").val()},function(){location.reload()})}),c.find("#epkb_enable_advanced_search_debug").on("click",function(){e(".eckb-top-notice-message").html("");a({action:"epkb_enable_advanced_search_debug",_wpnonce_epkb_enable_advanced_search_debug:e("#_wpnonce_epkb_enable_advanced_search_debug").val()},function(){location.reload()})}),c.find(".featured_img").on("click",function(a){a.preventDefault(),a.stopPropagation(),c.find(".image_zoom").remove();var t,i=e(this).find("img");t=i.length>1?e(i[0]).is(":visible")?e(i[0]).attr("src"):e(i[1]).is(":visible")?e(i[1]).attr("src"):e(i[2]).attr("src"):e(this).find("img").attr("src"),e(this).after('<div id="epkb_image_zoom" class="image_zoom"><img src="'+t+'" class="image_zoom"><span class="close icon_close"></span></div>'),e("html, body").on("click.epkb",function(){e("#epkb_image_zoom").remove(),e("html, body").off("click.epkb")})}),e("#add_on_panels").on("click",".ep_font_icon_info",function(){e(this).parent().find(".ep_font_icon_info_content").toggle()});var _=e(".epkb-analytics-container");if(_.find(".page-icon").on("click",function(){if(!e(this).closest(".eckb-nav-section").hasClass("epkb-active-nav")){_.find(".eckb-config-content").removeClass("epkb-active-content"),_.find(".eckb-nav-section").removeClass("epkb-active-nav");var a=e(this).attr("id");_.find("#"+a+"-content").addClass("epkb-active-content"),_.find(this).parents(".eckb-nav-section").addClass("epkb-active-nav")}}),e(".epkb-categories-icons").length){e(".epkb-categories-icons__button").on("click",function(){if(!e(this).hasClass("epkb-categories-icons__button--active")){e(".epkb-categories-icons__button").removeClass("epkb-categories-icons__button--active"),e(this).addClass("epkb-categories-icons__button--active"),e(".epkb-categories-icons__tab-body").slideUp("fast");var a=e(this).data("type");e(".epkb-categories-icons__tab-body--"+a).length&&e(".epkb-categories-icons__tab-body--"+a).slideDown("fast"),e("#epkb_head_category_icon_type").val(a)}}),e(".epkb-icon-pack__icon").on("click",function(){e(".epkb-icon-pack__icon").removeClass("epkb-icon-pack__icon--checked"),e(this).addClass("epkb-icon-pack__icon--checked"),e("#epkb_head_category_icon_name").val(e(this).data("key"))}),e(".epkb-category-image__button").on("click",function(a){a.preventDefault();var t=e(this),i=wp.media({title:t.data("title"),library:{type:"image"},multiple:!1}).on("select",function(){var a=i.state().get("selection").first().toJSON();e("#epkb_head_category_icon_image").val(a.id),e(".epkb-category-image__button").removeClass("epkb-category-image__button--no-image"),e(".epkb-category-image__button").addClass("epkb-category-image__button--have-image"),e(".epkb-category-image__button").css({"background-image":"url("+a.url+")"})}).open()}),e("#parent").on("change",function(){var a,t,i=e(this),n=e("#epkb_head_category_template").val(),o=!1;i.find("option").each(function(){e(this).val()==i.val()&&(t=e(this))}),a="-1"==t.val()?1:t.hasClass("level-0")?2:3,"Tabs"==n?2!==a&&(o=!0):"Sidebar"==n?o=!0:a>1&&(o=!0),o?(e(".epkb-categories-icons").hide(),e(".epkb-categories-icons+.epkb-term-options-message").show()):(e(".epkb-categories-icons").show(),e(".epkb-categories-icons+.epkb-term-options-message").hide())});function d(){e("#epkb_font_icon").trigger("click"),e("#epkb_head_category_thumbnail_size").val(e("#epkb_head_category_thumbnail_size").find("option").eq(0).val()),e(".epkb-category-image__button").addClass("epkb-category-image__button--no-image"),e(".epkb-category-image__button").removeClass("epkb-category-image__button--have-image"),e(".epkb-category-image__button").css({"background-image":""}),e("#epkb_head_category_icon_image").val(0),e("div[data-key=ep_font_icon_document]").trigger("click")}e(document).ajaxComplete(function(a,t,i){if(!i)return;let n,o=i.data.split("&");for(n=0;n<o.length;n++)sParameterName=o[n].split("="),"action"===sParameterName[0]&&"add-tag"===sParameterName[1]&&(d(),e("html, body").animate({scrollTop:e(".wp-heading-inline").offset().top},300))})}e(document.body).on("click",".epkb-close-notice",function(){let a=e(this).closest(".eckb-bottom-notice-message");a.addClass("fadeOutDown"),setTimeout(function(){a.html("")},1e3)});var l=e("#epkb-dialog-info-icon").dialog({resizable:!1,autoOpen:!1,modal:!0,buttons:{Ok:function(){e(this).dialog("close")}},close:function(){e("#epkb-dialog-info-icon-msg").html()}});c.find(".ekb-admin-page-tab-panel, .epkb-config-sidebar-options").on("click",".info-icon",function(){var a=!1,t="",i=e(this).parent().find(".label").text();i=i||"";var n=e(this).find("p").html();if(n){var o=n.split("@");n=o[0]?o[0]:epkb_vars.help_text_coming,o[1]&&(a=!0,t='<img class="epkb-help-image" src="'+o[1]+'">')}else n=epkb_vars.help_text_coming;e("#epkb-dialog-info-icon-msg").html("<p>"+n+"</p><br/>"+t),l.dialog({title:i,width:a?1e3:400,maxHeight:a?750:300,open:function(){e("#epkb-dialog-info-icon").find(".epkb-help-image").one("load",function(){l.dialog("option",{position:{my:"center",at:"center",of:window}})}),e(".ui-widget-overlay").on("click",function(){e("#epkb-dialog-info-icon").dialog("close")})}}).dialog("open")}),e("#epkb-ajax-in-progress").dialog({resizable:!1,height:70,width:200,modal:!1,autoOpen:!1}).hide(),c.on("click",".eckb-tooltip-button",function(){e(this).parent().find(".eckb-tooltip-contents").fadeToggle()}),e("body").on("click",".eckb-wizard-accordion .eckb-wizard-option-heading",function(){var a=e(this).closest(".eckb-wizard-accordion"),t=e(this).closest(".eckb-wizard-accordion__body-content"),i=t.hasClass("eckb-wizard-accordion__body-content--active");a.find(".eckb-wizard-accordion__body-content").removeClass("eckb-wizard-accordion__body-content--active"),i||t.addClass("eckb-wizard-accordion__body-content--active")}),e("body").on("click","#eckb-wizard-main-page-preview a, .epkb-wizard-theme-panel-container a, #eckb-wizard-article-page-preview a",!1),e(".epkb-notice-remind").on("click",function(a){a.preventDefault(),e(this).parent().parent().remove()}),e(document).on("click",".epkb-notice-dismiss",function(a){a.preventDefault(),e(".notice-"+e(this).data("notice-id")).slideUp();var t={action:"epkb_dismiss_ongoing_notice",epkb_dismiss_id:e(this).data("notice-id")};e.ajax({type:"POST",dataType:"json",url:ajaxurl,data:t})}),e("#epkb-editor-disabled .epkb-article-structure-dialog").on("click",function(a){return a.preventDefault(),e("#epkb-editor-disabled").find(".epkb-dialog-box-form").toggleClass("epkb-dialog-box-form--active"),!1}),e(".epkb-dialog-box-form .epkb-dbf__close, .epkb-dialog-box-form .epkb-dbf__footer__cancel").on("click",function(){e(this).closest(".epkb-dialog-box-form").toggleClass("epkb-dialog-box-form--active")}),e(".epkb-dialog-box-form .epkb-dbf__footer__accept__btn").on("click",function(){e(this).closest(".epkb-dialog-box-form").find("form").trigger("submit")}),e("body").find(".epkb__header__edit").on("click",function(){e(this).parent().parent().find(".epkb-ts__input-container").slideToggle(),e(this).parent().parent().find(".epkb-ts__action-container").slideToggle(),e(this).parents(".epkb-toggle-setting-container").toggleClass("epkb-toggle-setting-container--active")}),e("body").on("click",".eckb-Q__list__item-container",function(){e(this).find(".eckb-Q__item__question__toggle-icon").toggleClass("epkbfa-plus-square epkbfa-minus-square"),e(this).hasClass("eckb-Q__list__item--active")?e(this).removeClass("eckb-Q__list__item--active"):e(this).addClass("eckb-Q__list__item--active")}),e("body").on("change","#epkb-admin__secondary-boxes-list__settings__various [name=epkb_wpml_enable]",function(){e(".eckb-top-notice-message").remove();let a,c,s={action:"epkb_wpml_enable",_wpnonce_epkb_wpml_enable:e("#_wpnonce_epkb_wpml_enable").val(),wpml_enable:e(this).prop("checked")?"on":"off",epkb_kb_id:e("#epkb_wpml_enable_kb_id").val()};e.ajax({type:"POST",dataType:"json",url:ajaxurl,data:s,beforeSend:function(e){t("show")}}).done(function(e){((a=e||"").error||void 0===a.message)&&(c=a.message?a.message:i("",epkb_vars.reload_try_again,"error"))}).fail(function(e,a,t){c=t?" ["+t+"]":epkb_vars.unknown_error,c=i(epkb_vars.error_occurred+". "+epkb_vars.msg_try_again,c,"error")}).always(function(){t("remove",""),void 0!==a.message&&(c=a.message),c&&(n(),e("body").append(c)),o()})}),e(".epkb-notification-box-basic__button-confirm").on("click",function(){e(this).attr("data-target").length>0&&e(this).closest(e(this).attr("data-target")).remove()}),e(".epkb-admin__step-cta-box__link[data-target]").on("click",function(){let a=e(this).attr("data-target");void 0!==a&&0!==a.length&&(a=a.split("__"),e('.epkb-admin__top-panel__item[data-target="'+a[0]+'"]').trigger("click"),a.length>1&&setTimeout(function(){e('.epkb-admin__secondary-panel__item[data-target="'+a[1]+'"]').trigger("click")},100))}),o()});